let widgetContainer = document?.getElementById("widgetContainer");

widgetContainer.variables = {
  sampleResponse1: {
    data: {
      users: {
        total: 2.08,
        historicalData: [
          {
            time: {
              month: 6,
              year: 2022,
            },
            value: 0.28,
          },
          {
            time: {
              month: 7,
              year: 2022,
            },
            value: 0.82,
          },
          {
            time: {
              month: 8,
              year: 2022,
            },
            value: 0.92,
          },
          {
            time: {
              month: 9,
              year: 2022,
            },
            value: 0.88,
          },
          {
            time: {
              month: 10,
              year: 2022,
            },
            value: 0.91,
          },
          {
            time: {
              month: 11,
              year: 2022,
            },
            value: 1.24,
          },
          {
            time: {
              month: 2,
              year: 2023,
            },
            value: 1.03,
          },
          {
            time: {
              month: 3,
              year: 2023,
            },
            value: 1.72,
          },
          {
            time: {
              month: 12,
              year: 2022,
            },
            value: 0.97,
          },
          {
            time: {
              month: 1,
              year: 2023,
            },
            value: 1.0,
          },

          {
            time: {
              month: 4,
              year: 2023,
            },
            value: 2.08,
          },
        ],
      },
    },
  },
  sampleResponse2: {
    data: [
      {
        month: "Jan",
        expected: "9.2",
        actual: "5.4",
      },
      {
        month: "Feb",
        expected: "7.8",
        actual: "5.7",
      },
      {
        month: "Mar",
        expected: "9.2",
        actual: "6.5",
      },
      {
        month: "Apr",
        expected: "8.8",
        actual: "7.1",
      },
      {
        month: "May",
        expected: "8.3",
        actual: "7.4",
      },
      {
        month: "Jun",
        expected: "8.9",
        actual: "7.5",
      },
    ],
  },
};

let data = {
  "2023-10-24": "177",
  "2023-10-25": "157",
  "2023-10-26": "171",
  "2023-10-27": "126",
  "2023-10-28": "96",
  "2023-10-29": "76",
  "2023-10-30": "164",
  "2023-10-31": "184",
  "2023-11-01": "121",
  "2023-11-02": "132",
  "2023-11-03": "133",
  "2023-11-04": "66",
  "2023-11-05": "83",
  "2023-11-06": "126",
  "2023-11-07": "145",
  "2023-11-08": "163",
  "2023-11-09": "147",
  "2023-11-10": "134",
  "2023-11-11": "92",
  "2023-11-12": "73",
  "2023-11-13": "141",
  "2023-11-14": "153",
  "2023-11-15": "145",
  "2023-11-16": "154",
  "2023-11-17": "118",
  "2023-11-18": "68",
  "2023-11-19": "58",
  "2023-11-20": "119",
  "2023-11-21": "154",
  "2023-11-22": "5999",
  "2023-11-23": "1948",
  "2023-11-24": "5417",
  "2023-11-25": "7117",
  "2023-11-26": "868",
  "2023-11-27": "862",
  "2023-11-28": "6735",
  "2023-11-29": "1615",
  "2023-11-30": "652",
  "2023-12-01": "600",
  "2023-12-02": "264",
  "2023-12-03": "234",
  "2023-12-04": "6787",
  "2023-12-05": "1577",
  "2023-12-06": "1050",
  "2023-12-07": "1119",
  "2023-12-08": "350",
  "2023-12-09": "238",
  "2023-12-10": "203",
  "2023-12-11": "346",
  "2023-12-12": "339",
  "2023-12-13": "257",
  "2023-12-14": "285",
  "2023-12-15": "228",
  "2023-12-16": "151",
  "2023-12-17": "132",
  "2023-12-18": "263",
  "2023-12-19": "242",
  "2023-12-20": "204",
  "2023-12-21": "5994",
  "2023-12-22": "1999",
  "2023-12-23": "393",
  "2023-12-24": "246",
  "2023-12-25": "236",
  "2023-12-26": "315",
  "2023-12-27": "402",
  "2023-12-28": "351",
  "2023-12-29": "259",
  "2023-12-30": "176",
  "2023-12-31": "151",
  "2024-01-01": "178",
  "2024-01-02": "353",
  "2024-01-03": "442",
  "2024-01-04": "296",
  "2024-01-05": "229",
  "2024-01-06": "141",
  "2024-01-07": "140",
  "2024-01-08": "301",
  "2024-01-09": "6761",
  "2024-01-10": "1900",
  "2024-01-11": "663",
  "2024-01-12": "465",
  "2024-01-13": "277",
  "2024-01-14": "268",
  "2024-01-15": "525",
  "2024-01-16": "400",
  "2024-01-17": "390",
  "2024-01-18": "325",
  "2024-01-19": "299",
  "2024-01-20": "157",
  "2024-01-21": "157",
  "2024-01-22": "283",
  "2024-01-23": "286",
  "2024-01-24": "312",
  "2024-01-25": "284",
  "2024-01-26": "272",
  "2024-01-27": "158",
  "2024-01-28": "138",
  "2024-01-29": "266",
  "2024-01-30": "290",
  "2024-01-31": "1075",
  "2024-02-01": "245",
  "2024-02-02": "233",
  "2024-02-03": "146",
  "2024-02-04": "141",
  "2024-02-05": "286",
  "2024-02-06": "236",
  "2024-02-07": "221",
  "2024-02-08": "193",
  "2024-02-09": "171",
  "2024-02-10": "131",
  "2024-02-11": "121",
  "2024-02-12": "220",
  "2024-02-13": "188",
  "2024-02-14": "200",
  "2024-02-15": "180",
  "2024-02-16": "182",
  "2024-02-17": "121",
  "2024-02-18": "114",
  "2024-02-19": "7326",
  "2024-02-20": "1684",
  "2024-02-21": "842",
  "2024-02-22": "584",
  "2024-02-23": "409",
  "2024-02-24": "296",
  "2024-02-25": "241",
  "2024-02-26": "427",
  "2024-02-27": "371",
  "2024-02-28": "350",
  "2024-02-29": "320",
  "2024-03-01": "282",
  "2024-03-02": "184",
  "2024-03-03": "138",
  "2024-03-04": "338",
  "2024-03-05": "304",
  "2024-03-06": "300",
  "2024-03-07": "278",
  "2024-03-08": "239",
  "2024-03-09": "134",
  "2024-03-10": "119",
  "2024-03-11": "210",
  "2024-03-12": "253",
  "2024-03-13": "257",
  "2024-03-14": "257",
  "2024-03-15": "199",
  "2024-03-16": "127",
  "2024-03-17": "135",
  "2024-03-18": "236",
  "2024-03-19": "231",
  "2024-03-20": "246",
  "2024-03-21": "254",
  "2024-03-22": "173",
  "2024-03-23": "129",
  "2024-03-24": "126",
  "2024-03-25": "6399",
  "2024-03-26": "2430",
  "2024-03-27": "938",
  "2024-03-28": "585",
  "2024-03-29": "391",
  "2024-03-30": "276",
  "2024-03-31": "246",
  "2024-04-01": "458",
  "2024-04-02": "447",
  "2024-04-03": "837",
  "2024-04-04": "786",
  "2024-04-05": "326",
  "2024-04-06": "179",
  "2024-04-07": "149",
  "2024-04-08": "330",
  "2024-04-09": "310",
  "2024-04-10": "308",
  "2024-04-11": "309",
  "2024-04-12": "308",
  "2024-04-13": "139",
  "2024-04-14": "145",
  "2024-04-15": "289",
  "2024-04-16": "289",
  "2024-04-17": "255",
  "2024-04-18": "238",
  "2024-04-19": "219",
};
const currentYear = new Date().getFullYear();
const result = Object.entries(data).reduce((acc, [key, value]) => {
  if (parseInt(key.split("-")[0]) === currentYear) {
    acc.push({ key, value });
  }
  return acc;
}, []);
widgetContainer.jsonInput = {
  request: [
    {
      url: "https://run.mocky.io/v3/db830bac-3ac3-4d97-ba85-aa13aacf5be5",
      method: "GET",
    },
  ],
  rows: [
    {
      classes: ["justify-content-center"],
      widgets: [
        {
          widget: "bar-chart",
          classes: ["col-md-6", "col-lg-3"],
          title: "Plugin Downloads",
          subtitle: "in current year",
          hideLegend: true,
          url: "www.google.com",
          info: "<strong>Sale Trend</strong>  in current year",
          datasets: [
            {
              data: result,
              parsing: {
                xAxisKey: "key",
                yAxisKey: "value",
              },
              label: "Actual Sales (in M)",
            },
          ],
          chartOptions: {
            scales: {
              x: {
                title: {
                  display: true,
                  text: "Month",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "Sales (in M)",
                },
                beginAtZero: false,
              },
            },
            plugins: {
              datalabels: {
                display: true,
              },
              title: {
                display: true,
                text: "Sale Trend",
              },
              tooltip: {
                callbacks: {
                  label: {
                    arguments: "tooltipItem",
                    body: "return tooltipItem.dataset.label + ': ' + tooltipItem.formattedValue + ' k';",
                  },
                },
              },
            },
          },
          chartStyle: {
            "height.px": 300,
          },
        },
        {
          widget: "bar-chart",
          classes: ["col-md-6", "col-lg-3"],
          title: "Plugin Downloads",
          subtitle: "in current year",
          hideLegend: true,
          url: "www.google.com",
          info: "<strong>Sale Trend</strong>  in current year",
          datasets: [
            {
              data: result,
              parsing: {
                xAxisKey: "key",
                yAxisKey: "value",
              },
              label: "Actual Sales (in M)",
            },
          ],
          chartOptions: {
            scales: {
              x: {
                title: {
                  display: true,
                  text: "Month",
                },
              },
              y: {
                title: {
                  display: true,
                  text: "Sales (in M)",
                },
                beginAtZero: false,
              },
            },
            plugins: {
              datalabels: {
                display: true,
              },
              title: {
                display: true,
                text: "Sale Trend",
              },
              tooltip: {
                callbacks: {
                  label: {
                    arguments: "tooltipItem",
                    body: "return tooltipItem.dataset.label + ': ' + tooltipItem.formattedValue + ' k';",
                  },
                },
              },
            },
          },
          chartStyle: {
            "height.px": 300,
          },
        },
      ],
    },
  ],
};
console.log(widgetContainer?.variables, widgetContainer?.jsonInput);
console.log("Md Shohanur Rahman 000");
document.getElementById("jsonDisplay").innerHTML = JSON.stringify(
  widgetContainer.jsonInput,
  null,
  4,
);